#!/usr/bin/env bash

picker() {
    case $(uname) in
    Linux)
        rofi -i -dmenu -p song
        ;;
    Darwin)
        choose-gui -s 18 -n 30
        ;;
    *)
        exit 1
        ;;
    esac
}

next_song=$(mpc listall | shuf | picker)
[[ -n $next_song ]] && mpc insert "$next_song" && if [[ -n $1 ]]; then mpc next; fi
